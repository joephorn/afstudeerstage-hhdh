<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Prototype</title>
    <script src="https://cdn.jsdelivr.net/npm/p5@1.11.10/lib/p5.js"></script>
    <script src="https://unpkg.com/p5.js-svg@1.6.0"></script>
    <!-- Vector PDF export dependencies (used only for Export actions) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/3.0.2/jspdf.umd.min.js"></script>
    <script src="https://unpkg.com/svg2pdf.js@2.2.4/dist/svg2pdf.umd.min.js"></script>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <main>
      <div id="blockLeft">
          <div id="canvasWrap"></div>
          <div id="exportBar" class="export-bar">
            <div class="bar-inner">
              <!-- Size group: preset + custom resolution -->
              <div class="size-group">
                <label class="control-label control-label--inline" for="preset">
                  <span>Size</span>
                </label>
                <select id="preset" class="control-select control-select--tight">
                  <option value="fit" selected>Fit — fill screen</option>
                  <option value="ar1" data-aw="16" data-ah="9" data-w="1920" data-h="1080">16:9 — 1920 × 1080 (Full HD)</option>
                  <option value="ar2" data-aw="16" data-ah="9" data-w="1280" data-h="720">16:9 — 1280 × 720 (HD)</option>
                  <option value="ar3" data-aw="16" data-ah="9" data-w="3840" data-h="2160">16:9 — 3840 × 2160 (4K)</option>
                  <option value="ar4" data-aw="9" data-ah="16" data-w="1080" data-h="1920">9:16 — 1080 × 1920 (Vertical Full HD)</option>
                  <option value="ar5" data-aw="9" data-ah="16" data-w="720" data-h="1280">9:16 — 720 × 1280</option>
                  <option value="ar6" data-aw="1" data-ah="1" data-w="1080" data-h="1080">1:1 — 1080 × 1080</option>
                  <option value="ar7" data-aw="4" data-ah="5" data-w="1080" data-h="1350">4:5 — 1080 × 1350</option>
                  <option value="ar8" data-aw="3" data-ah="2" data-w="1620" data-h="1080">3:2 — 1620 × 1080</option>
                  <option value="ar9" data-aw="4" data-ah="3" data-w="1024" data-h="768">4:3 — 1024 × 768</option>
                  <option value="ar10" data-aw="4" data-ah="3" data-w="2048" data-h="1536">4:3 — 2048 × 1536</option>
                  <option value="ar11" data-aw="21" data-ah="9" data-w="2560" data-h="1080">21:9 — 2560 × 1080 (Ultrawide)</option>
                  <option value="ar12" data-aw="21" data-ah="9" data-w="3440" data-h="1440">21:9 — 3440 × 1440 (Ultrawide)</option>
                  <option value="custom" data-aw="" data-ah="" data-w="" data-h="">Custom…</option>
                </select>
                <div id="customAR" class="custom-resolution">
                  <label class="control-label inline-label">
                    <span>Custom resolution</span>
                    <span class="sub">pixels</span>
                  </label>
                  <div class="field-row">
                    <input id="aspectW" class="input-fluid" type="number" min="1" step="1" value="1920" placeholder="Width (px)" />
                    <input id="aspectH" class="input-fluid" type="number" min="1" step="1" value="1080" placeholder="Height (px)" />
                  </div>
                  <div class="field-row" style="align-items:center; gap:8px; margin-top:6px;">
                    <button id="applyCustomAR" type="button">Apply</button>
                  </div>
                </div>
              </div>
              <!-- Format group -->
              <div class="format-group">
                <label class="control-label control-label--inline" for="exportFormat">
                  <span>Format</span>
                </label>
                <select id="exportFormat" class="control-select control-select--tight">
                  <option value="svg">SVG</option>
                  <option value="pdf">PDF</option>
                </select>
              </div>
              <!-- Keyframes -->
              <div class="keyframe-group">
                <label class="control-label control-label--inline" for="kfDur">
                  <span>Keyframes</span>
                </label>
                <div id="kfList" class="kf-list"></div>
                <div class="field-row" style="align-items:center; gap:8px; margin-top:6px;">
                  <input id="kfDur" type="number" min="50" step="50" value="500" style="width:120px" />
                  <button id="kfAdd" type="button" title="Add keyframe">+ Add</button>
                  <button id="kfDel" type="button" title="Remove keyframe">– Remove</button>
                  <button id="kfToggle" type="button" title="Play/Pause">▶</button>
                </div>
              </div>

              <!-- Actions -->
              <div class="actions">
                <button id="exportGo" type="button">Export</button>
              </div>
            </div>
          </div>
      </div>

      <div id="controls">
        <section class="control-section">
          <h2 class="control-section-title">General</h2>
          <div class="control-field">
            <label class="control-label" for="logoScale">
              <span>Scale</span>
              <span id="logoScaleOut" class="sub">100 %</span>
            </label>
            <input id="logoScale" type="range" min="10" max="200" step="1" value="100" />
          </div>
          <div class="control-field">
            <label class="control-label" for="rows">
              <span>Rows</span>
              <span id="rowsOut" class="sub">—</span>
            </label>
            <input id="rows" type="range" min="4" max="32" step="4" value="12" />
          </div>
          <div class="control-field">
            <label class="control-label" for="thickness">
              <span>Line height</span>
              <span id="thicknessOut" class="sub">— px</span>
            </label>
            <input id="thickness" type="range" min="1" max="50" step="1" value="10" />
          </div>
          <div class="control-field">
            <label class="control-label" for="tipRatio">
              <span>Tip ratio</span>
              <span id="tipOut" class="sub">0.30</span>
            </label>
            <input id="tipRatio" type="range" min="0" max="1" step="0.01" value="0.30" />
          </div>
          <div class="control-field">
            <label class="control-label" for="widthScale">
              <span>Width</span>
              <span id="widthOut" class="sub">— %</span>
            </label>
            <input id="widthScale" type="range" min="0" max="500" step="1" value="110" />
          </div>
          <div class="control-field">
            <label class="control-label" for="gap">
              <span>Gap</span>
              <span id="gapOut" class="sub">— px</span>
            </label>
            <input id="gap" type="range" min="-20" max="150" step="1" value="9" />
          </div>
          <div class="control-field">
            <label class="control-label" for="taperIndex">
              <span>Shape</span>
              <span id="taperIndexOut" class="sub">1</span>
            </label>
            <input id="taperIndex" type="range" min="1" max="5" step="1" value="1" />
            <div class="sub" style="margin-top:4px; opacity:.5; font-size:12px;">
              Rounded Straight Circles Blocks Pluses
            </div>
          </div>
        </section>

        <section class="control-section">
          <h2 class="control-section-title">Displacement</h2>
          <div class="control-field">
            <label class="control-label" for="groups">
              <span>Groups</span>
              <span id="groupsOut" class="sub">—</span>
            </label>
            <input id="groups" type="range" min="0" max="5" step="1" value="0" />
          </div>
          <div class="control-field">
            <label class="control-label" for="dispUnit">
              <span>Unit</span>
              <span id="dispUnitOut" class="sub">28 px</span>
            </label>
            <input id="dispUnit" type="range" min="0" max="80" step="1" value="28" />
          </div>
        </section>

        <section class="control-section">
          <h2 class="control-section-title">Color</h2>
          <div class="control-field">
            <label class="control-label" for="colorPreset">
              <span>Preset</span>
              <span class="sub" id="colorPresetLabel">Preset</span>
            </label>
            <select id="colorPreset" class="control-select control-select--tight"></select>
          </div>
          <div class="control-row">
            <label class="checkbox-label">
              <input id="bgLines" type="checkbox" /> Background lines
            </label>
          </div>
          <div class="control-row">
            <label class="checkbox-label">
              <input id="bgTransparent" type="checkbox" /> Transparant background
            </label>
          </div>
        </section>

        <section class="control-section">
          <h2 class="control-section-title">Wave</h2>
          <div class="control-row">
            <label class="checkbox-label">
              <input id="animEnabled" type="checkbox" /> Enabled
            </label>
          </div>
          <div class="control-field">
            <label class="control-label" for="pulsePhase">
              <span>Wave phase</span>
              <span id="pulsePhaseOut" class="sub">0.00</span>
            </label>
            <input id="pulsePhase" type="range" min="0" max="1" step="0.001" value="0" />
          </div>
          <div class="control-row">
            <label class="control-label control-label--inline">Mode</label>
            <label class="checkbox-label"><input type="radio" name="animMode" id="animOff" checked> Off</label>
            <label class="checkbox-label"><input type="radio" name="animMode" id="animMouse"> Mouse</label>
            <label class="checkbox-label"><input type="radio" name="animMode" id="animPulse"> Pulse ⇆</label>
            <label class="checkbox-label"><input type="radio" name="animMode" id="animScan"> Scan →</label>
          </div>
          <div class="control-row">
            <label class="control-label control-label--inline">Curve</label>
            <label class="checkbox-label"><input type="radio" name="curve" id="curveSine" checked> Sine</label>
            <label class="checkbox-label"><input type="radio" name="curve" id="curveSmooth"> Step</label>
          </div>
          <div class="control-field">
            <label class="control-label" for="animPeriod">
              <span>Duration</span>
              <span id="animPeriodOut" class="sub">0s</span>
            </label>
            <input id="animPeriod" type="range" min="2" max="10" step="0.1" value="3.0" />
          </div>
          <div class="control-field">
            <label class="control-label" for="powerCtl">
              <span>Amplitude</span>
              <span id="powerOut" class="sub">1.00×</span>
            </label>
            <input id="powerCtl" type="range" min="0.25" max="3" step="0.05" value="1" />
          </div>
          <div class="control-field">
            <label class="control-label" for="hWaveAmp">
              <span>Horizontal wave amplitude</span>
              <span id="hWaveAmpOut" class="sub">0.00×</span>
            </label>
            <input id="hWaveAmp" type="range" min="0" max="5" step="0.01" value="0" />
          </div>
          <div class="control-field">
            <label class="control-label" for="hWavePeriod">
              <span>Horizontal wave duration</span>
              <span id="hWavePeriodOut" class="sub">3.00 s</span>
            </label>
            <input id="hWavePeriod" type="range" min="0.5" max="10" step="0.1" value="3.0" />
          </div>
        </section>

        <section class="control-section">
          <h2 class="control-section-title">Repeat</h2>
          <div class="control-row">
            <label class="checkbox-label">
              <input id="repeatEnabled" type="checkbox" /> Enabled
            </label>
          </div>
          <div class="control-row">
            <label class="checkbox-label"><input type="radio" name="repeatMode" id="repeatModeUniform" checked> Uniform</label>
            <label class="checkbox-label"><input type="radio" name="repeatMode" id="repeatModeFalloff"> Falloff</label>
          </div>
          <div class="control-field">
            <label class="control-label" for="repeatFalloff">
              <span>Falloff</span>
              <span id="repeatFalloffOut" class="sub">1.00</span>
            </label>
            <input id="repeatFalloff" type="range" min="0.5" max="1" step="0.01" value="1.00" />
          </div>
          <div class="control-row">
            <label class="checkbox-label">
              <input id="repeatMirror" type="checkbox" /> Mirror
            </label>
          </div>
          <div class="control-group" id="repeatWindow">
            <label class="control-label" for="repeatExtraRows">
              <span>Extra rows</span>
              <output id="repeatExtraRowsOut" class="sub">0</output>
            </label>
            <input id="repeatExtraRows" type="range" min="0" max="0" step="1" value="0" />
          </div>
        </section>

        <section class="control-section">
          <h2 class="control-section-title">Easing</h2>
          <div class="control-field">
            <label class="control-label" for="easeType">
              <span>Type</span>
              <span class="sub">for slider transitions</span>
            </label>
            <select id="easeType" class="control-select control-select--tight">
              <option value="smooth" selected>Smoothstep</option>
              <option value="linear">Linear</option>
              <option value="easeInOut">Ease In-Out</option>
              <option value="elastic">Elastic</option>
            </select>
          </div>
          <div class="control-field">
            <label class="control-label" for="easeDur">
              <span>Duration</span>
            <span id="easeDurOut" class="sub">0.50 s</span>
          </label>
          <input id="easeDur" type="range" min="0" max="5" step="0.01" value="0.50" />
          </div>
          <div class="control-field">
            <label class="control-label" for="easeAmp">
              <span>Amplitude</span>
              <span id="easeAmpOut" class="sub">1.00×</span>
            </label>
            <input id="easeAmp" type="range" min="0" max="2" step="0.05" value="1.00" />
          </div>
        </section>

        <section class="control-section">
          <h2 class="control-section-title">Randomizer</h2>
          <div class="control-row">
            <label class="checkbox-label">
              <input id="autorand" type="checkbox" /> Auto randomize
            </label>
          </div>
          <div class="control-field">
            <label class="control-label" for="autorandDur">
              <span>Duration</span>
            <span id="autorandDurOut" class="sub">0.50 s</span>
          </label>
          <input id="autorandDur" type="range" min="0.5" max="5" step="0.1" value="0.5" />
          </div>
          <!-- Debug mode (temporarily disabled)
          <div class="control-row is-muted">
            <label class="checkbox-label">
              <input id="debug" type="checkbox" /> Debug mode
            </label>
          </div>
          -->
        </section>

        

        <section class="control-section">
          <h2 class="control-section-title">ID</h2>
          <div class="control-field">
            <label class="control-label" for="idCode">
              <span>Code</span>
            </label>
            <input id="idCode" class="input-fluid" type="text" placeholder="s100r12lh10w110g9…" />
          </div>
          <div class="button-group">
            <button id="idGet" type="button">Get</button>
            <button id="idSet" type="button">Set</button>
            <button id="idCopy" type="button">Copy</button>
          </div>
          <div id="idStatus" class="sub"></div>
        </section>

        <section class="control-section">
          <div class="button-group">
            <button id="resetDefaults" type="button">Reset</button>
          </div>
        </section>
      </div>
    </main>
    <script src="./src/kleuren.js"></script>
    <script src="sketch.js"></script>
  </body>
</html>
